{"$product":{"deployment_mode":"SOLO","name":"API AutoFlow Pro","version":"3.0.20"},"API":[{"id":"sns-app-api","type":"http","version":{"0.0.0":{"components":{"securitySchemes":{"bearer":{"scheme":"bearer","type":"http"}}},"info":{"description":"APIs for SNS-App service","title":"SNS-App API","version":"0.0.0"},"openapi":"3.0.2","paths":{"/auth/user":{"delete":{"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"password":{"maxLength":255,"type":"string"}},"required":["password"],"type":"object"}}}},"responses":{"200":{},"400":{}},"summary":"Delete User Account","x-request-examples":{}},"get":{"responses":{"200":{},"400":{}}},"patch":{"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"description":{"type":"string"},"email":{"maxLength":255,"type":"string"},"gender":{"enum":["Male","Female","Hidden"],"type":"string"},"name":{"maxLength":50,"type":"string"},"password":{"maxLength":255,"type":"string"},"phone":{"maxLength":50,"type":"string"}},"type":"object"}}}},"responses":{"200":{},"400":{}},"summary":"Modify User Account Info","x-request-examples":{}},"post":{"description":"","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"description":{"type":"string"},"email":{"maxLength":255,"type":"string"},"gender":{"enum":["Male","Female","Hidden"],"type":"string"},"name":{"maxLength":50,"type":"string"},"password":{"maxLength":255,"type":"string"},"phone":{"maxLength":50,"type":"string"},"username":{"maxLength":255,"type":"string"}},"required":["password","username"],"type":"object"}}}},"responses":{"200":{},"400":{}},"security":{},"summary":"User Account Registration","x-request-examples":{"test-auth-registeration":{"body":{"description":"Test account for SNS-App template","email":"autoflow@autoflow.com","gender":"Male","name":"Kim","password":"qwer1234","phone":"+82-10-0000-0000","username":"autoflow"}}}}},"/auth/user/find-pw":{"post":{"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"email":{"maxLength":255,"type":"string"},"username":{"maxLength":255,"type":"string"}},"required":["email","username"],"type":"object"}}}},"responses":{"200":{},"400":{}},"security":{},"summary":"Find Password For User Account","x-request-examples":{"test-auth-findpw":{"body":{"email":"autoflow@autoflow.com","username":"autoflow"}}}}},"/auth/user/login":{"post":{"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"password":{"maxLength":255,"type":"string"},"username":{"maxLength":255,"type":"string"}},"required":["password","username"],"type":"object"}}}},"responses":{"200":{},"400":{}},"security":{},"summary":"User Account Login","x-request-examples":{"test-auth-login":{"body":{"password":"qwer1234","username":"autoflow"}}}}},"/comment":{"post":{"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"comment_id":{"type":"number"},"content":{"type":"string"},"post_id":{"type":"number"}},"required":["content"],"type":"object"}}}},"responses":{"200":{},"400":{}}}},"/comment/:comment_id":{"delete":{"parameters":[{"in":"path","name":"comment_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/comment/:comment_id/like":{"delete":{"parameters":[{"in":"path","name":"comment_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}},"post":{"parameters":[{"in":"path","name":"comment_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/post":{"get":{"parameters":[{"in":"query","name":"page"},{"in":"query","name":"page_size"}],"responses":{"200":{},"400":{}},"x-request-examples":{}},"post":{"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"content":{"type":"string"},"tags":{"type":"string"}},"required":["content"],"type":"object"}}}},"responses":{"200":{},"400":{}}}},"/post/:post_id":{"delete":{"parameters":[{"in":"path","name":"post_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}},"patch":{"parameters":[{"in":"path","name":"post_id","required":true,"schema":{"type":["number","string"]}}],"requestBody":{"content":{"application/json":{"schema":{"additionalProperties":false,"properties":{"content":{"type":"string"},"tags":{"type":"string"}},"required":["content"],"type":"object"}}}},"responses":{"200":{},"400":{}}}},"/post/:post_id/like":{"delete":{"parameters":[{"in":"path","name":"post_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}},"post":{"parameters":[{"in":"path","name":"post_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/post/tags/:tag":{},"/profile/:user_id":{"get":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/profile/:user_id/follow":{"delete":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}},"post":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/profile/:user_id/followers":{"get":{"responses":{"200":{},"400":{}}}},"/profile/:user_id/following":{"get":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/profile/:user_id/post":{"get":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":["number","string"]}}],"responses":{"200":{},"400":{}}}},"/search":{},"/timezone":{}},"security":[{"bearer":[]}],"servers":[],"tags":[]}}}],"Client":[{"currentVersion":"0.0.0","id":"sns-app-client","type":"mariadb","version":{"0.0.0":{"events":[],"info":{"description":"Database connection for SNS-App","title":"SNS-App Database"},"setting":{"database":"sns_app","password":"password","servers":[{"address":"127.0.0.1","port":"3306","role":["read","write"]}],"username":"root"}}}}],"Server":[{"currentVersion":"0.0.0","id":"sns-app-server","type":"http","version":{"0.0.0":{"events":[{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/auth/user"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":"Encode the request password value","input":{"input":{"password":{"__struct__":"ScopeReference","path":["body","password"],"scope":"request"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"encode","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_password","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["password_encode_result"],"scope":"variables"},"title":"Encode password","visualId":"e50f601e-3354-4cb7-9504-51df8a0774c5"},{"__struct__":"Action","active":true,"category":"database","description":"Executing the user find query with authentication info and password","input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["password_encode_result","password"],"scope":"variables"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"SELECT `id` FROM `user` WHERE `id` = ? AND `password` = ?","return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"User find query","visualId":"e5467515-adc6-4b08-8bb1-d2ef2ae0e73e"},{"__struct__":"Action","active":true,"category":"conditional","description":"Check the user select query result","input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["query_result",0],"scope":"variables"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":"Delete user","input":{"params":[{"__struct__":"ScopeReference","path":["query_result","0","id"],"scope":"variables"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE user WHERE id = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete user query","visualId":"bb4fde56-f197-4fe8-b144-18f7e3d47e49"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Your account has been successfully deleted"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user delete query result","visualId":"a786d94d-c887-46ff-933f-4f15601b8b9b"}],"mapping":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Password is incorrect"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user select query result","visualId":"3a744338-20c1-40cb-bf49-a6ba8e569682"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"patch","path":"/auth/user"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"conditional","description":"Get the information from the request body, and if there is password information, encode the password","input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["body","password"],"scope":"request"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":"Encode the request password value","input":{"input":{"password":{"__struct__":"ScopeReference","path":["body","password"],"scope":"request"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"encode","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_password","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["password_encode_result"],"scope":"variables"},"title":"Encode password","visualId":"3c45bf9f-0280-40e7-96db-6e656247da7e"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"key":"password","object":{"__struct__":"ScopeReference","path":["body"],"scope":"request"},"value":{"__struct__":"ScopeReference","path":["password_encode_result","hashed_password"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"put","output":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"title":"Set encoded password","visualId":"fffceab4-fa75-446b-82b4-bc6170c9c76e"}],"mapping":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"}}},{"condition":true,"value":{"__struct__":"ScopeReference","path":["body"],"scope":"request"}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"title":"Set information to be updated","visualId":"5e3324ed-d829-4614-85cf-5ed434669148"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"object":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"keys","output":{"__struct__":"ScopeReference","path":["update_keys"],"scope":"variables"},"title":"Set column information","visualId":"feea10bd-3797-4859-ba56-b55bda542605"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"key":"id","object":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"value":{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"put","output":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"title":"Specify the ID to be updated","visualId":"fdffebad-16a9-4ed4-a601-4c7b946528ad"},{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"columns":{"__struct__":"ScopeReference","path":["update_keys"],"scope":"variables"},"conditions":["id"],"data":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"return-error":false,"table":"user"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"update","output":{"__struct__":"ScopeReference","path":["update_query_result"],"scope":"variables"},"title":"Update user information query","visualId":"4f608fee-7b41-49f4-a2b9-0338728adb3f"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["update_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Account information has been successfully updated"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user password update query result","visualId":"cc960c96-53b7-4676-be60-1c8e1a7ccf7f"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user/find-pw"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user/find-pw"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":"Executing the user find query with username and encoded password","input":{"params":[{"__struct__":"ScopeReference","path":["body","username"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","email"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"SELECT `id` FROM `user` WHERE `username` = ? AND `email` = ?","return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"User find query","visualId":"422fb562-5133-42a0-8308-568888bdd8df"},{"__struct__":"Action","active":true,"category":"conditional","description":"Check the user select query result","input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["query_result",0],"scope":"variables"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":"Generate random text for temporary password","input":{"input":{"info":{"__struct__":"ScopeReference","path":["query_result","0"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"generate","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_password","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["password_generate_result"],"scope":"variables"},"title":"Generate random password","visualId":"e6b0c852-c281-4172-bc7f-de9b92de8326"},{"__struct__":"Action","active":true,"category":"service","description":"Encode the request password value","input":{"input":{"password":{"__struct__":"ScopeReference","path":["password_generate_result","password"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"encode","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_password","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["password_encode_result"],"scope":"variables"},"title":"Encode password","visualId":"829a5c96-5b22-48c4-a40f-97d8101e999a"},{"__struct__":"Action","active":true,"category":"database","description":"Change user password with random text","input":{"params":[{"__struct__":"ScopeReference","path":["password_encode_result","hashed_password"],"scope":"variables"},{"__struct__":"ScopeReference","path":["query_result","0","id"],"scope":"variables"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"UPDATE `user` SET `password` = ? WHERE `id` = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["update_query_result"],"scope":"variables"},"title":"Update temporary password query","visualId":"df1474e6-46bb-4679-980a-8691085b4d5a"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["update_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"This is your temporary password. Please be sure to change your password after logging in"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"password","title":"password","value":{"__struct__":"ScopeReference","path":["password_generate_result","password"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user password update query result","visualId":"554a851f-7891-4832-b330-09270e8683bf"}],"mapping":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"No matching users found"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user select query result","visualId":"48cec2c9-975f-42b3-a7f6-18c0da5ef4cd"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user/login"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user/login"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user/login"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":"Encode the request password value","input":{"input":{"password":{"__struct__":"ScopeReference","path":["body","password"],"scope":"request"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"encode","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_password","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["password_encode_result"],"scope":"variables"},"title":"Encode password","visualId":"63f2bb2d-d3f2-4a87-9ac2-b1d745dde46f"},{"__struct__":"Action","active":true,"category":"database","description":"Executing the user find query with username and encoded password","input":{"params":[{"__struct__":"ScopeReference","path":["body","username"],"scope":"request"},{"__struct__":"ScopeReference","path":["password_encode_result","hashed_password"],"scope":"variables"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"SELECT `id`, `username`, `name` FROM `user` WHERE `username` = ? AND `password` = ?","return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"User find query","visualId":"8d57be6a-dcd1-475d-bd85-4162730ffb38"},{"__struct__":"Action","active":true,"category":"conditional","description":"Check the user select query result","input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["query_result",0],"scope":"variables"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":"Create user authentication token","input":{"input":{"info":{"__struct__":"ScopeReference","path":["query_result","0"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"token_create","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_authentication","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["create_token_result"],"scope":"variables"},"title":"Create user authentication token","visualId":"b9e74d61-051b-4a57-b5e4-99f6284ba4f4"}],"mapping":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"login has been completed successfully"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"token","title":"token","value":{"__struct__":"ScopeReference","path":["create_token_result","token"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Incorrect username or password"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user select query result","visualId":"23e64eb9-cb2a-4965-9069-341b1c42176a"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/comment"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/comment"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["body","content"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","post_id"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","comment_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"INSERT INTO `comment` (`user_id`, `content`, `post_id`, `comment_id`) VALUES (?, ?, ?, ?)","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"title":"Add comment query","visualId":"12f7cb91-47fc-4bda-8bf9-3d42e2cf39be"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"comment_id":{"__struct__":"ScopeReference","path":["body","comment_id"],"scope":"request"},"post_id":{"__struct__":"ScopeReference","path":["body","post_id"],"scope":"request"},"user_id":{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"list","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"comment","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["comment"],"scope":"variables"},"title":null,"visualId":"f60f43bf-c46f-498f-a46f-72086176ba99"}],"mapping":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Comment added"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"comment_list","title":"comment_list","value":{"__struct__":"ScopeReference","path":["comment","list"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the comment insert query result","visualId":"aeadc636-5e04-4ad5-974c-a5696981f01b"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/comment/:comment_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/comment/:comment_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","comment_id"],"scope":"request"},{"__struct__":"ScopeReference","path":["path","comment_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE FROM `comment` WHERE ( `user_id` = ? AND `id` = ? ) OR `comment_id` = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete comment query","visualId":"e7789e13-aeda-44d5-be82-331020b4e8ca"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Comment has been removed"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the comment delete query result","visualId":"defd87f7-9dad-4855-8bc7-2a80648caad9"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/comment/:comment_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/comment/:comment_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","comment_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE FROM `like` WHERE `user_id` = ? AND `comment_id` = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete comment like query","visualId":"2903c150-7650-4817-a247-814a76c05814"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Like has been removed"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the comment like delete query result","visualId":"b6e6d326-5e4b-4907-a3cb-8a9a8cda72a5"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/comment/:comment_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/comment/:comment_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","comment_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"INSERT INTO `like` (`user_id`, `comment_id`) VALUES (?, ?)","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"title":"Add comment like query","visualId":"50315ff0-971f-4065-8656-d2040c3855c1"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Like added"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the comment like insert query result","visualId":"ca730a05-1ac8-4c16-b51f-56a0c1478324"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/auth/user"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":"Username duplicate check","input":{"params":[{"__struct__":"ScopeReference","path":["body","username"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"SELECT COUNT(*) as count FROM `user` WHERE `username` = ?","return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["duplicated_count"],"scope":"variables"},"title":"Username duplicate check","visualId":"10ff3b2a-b70b-4b06-9b7d-c8672676c0ac"},{"__struct__":"Action","active":true,"category":"conditional","description":"INSERT proceeds only if the username is not a duplicate","input":{"conditions":[{"condition":{"__struct__":"Comparison","type":"equal","value":[{"__struct__":"ScopeReference","path":["duplicated_count","0","count"],"scope":"variables"},0]},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":"Encode the request password value","input":{"input":{"password":{"__struct__":"ScopeReference","path":["body","password"],"scope":"request"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"encode","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_password","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["password_encode_result"],"scope":"variables"},"title":"Encode password","visualId":"c2911534-84ad-4817-8a5c-9efbf6a003ec"},{"__struct__":"Action","active":true,"category":"database","description":"Executing the user add query","input":{"params":[{"__struct__":"ScopeReference","path":["body","username"],"scope":"request"},{"__struct__":"ScopeReference","path":["password_encode_result","hashed_password"],"scope":"variables"},{"__struct__":"ScopeReference","path":["body","name"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","email"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","phone"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","gender"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","description"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"INSERT INTO `user` (`username`, `password`, `name`, `email`, `phone`, `gender`, `description`) VALUES (?, ?, ?, ?, ?, ?, ?)","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"title":"User insert query","visualId":"538cab7e-0f5e-4dc7-b0b0-87a7fbb07026"},{"__struct__":"Action","active":true,"category":"conditional","description":"Check the user insert query result","input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"registration has been completed successfully"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred during the registration process"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user insert query result","visualId":"89fa6b76-41fb-432a-b934-042b6a63855e"}],"mapping":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"username already exists"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Username duplicate check","visualId":"44549290-c897-4d35-9ba7-84ad6c1f62bb"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/post"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/post"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"user_id":{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"list","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"post","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["post"],"scope":"variables"},"title":null,"visualId":"836b06ed-b8eb-424f-9fd8-d61fe1ee6771"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["post","list"],"scope":"variables"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"iteration","description":null,"input":{"array":{"__struct__":"ScopeReference","path":["post","list"],"scope":"variables"},"foreach":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"post_id":{"__struct__":"ScopeReference","path":["value","id"],"scope":"post_data"},"user_id":{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"list","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"comment","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["comment"],"scope":"variables"},"title":null,"visualId":"52825fb3-c611-47cd-abdd-9d4a39cc3dd7"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"key":"comments","object":{"__struct__":"ScopeReference","path":["post","list",{"__struct__":"ScopeReference","path":["index"],"scope":"post_data"}],"scope":"variables"},"value":{"__struct__":"ScopeReference","path":["comment","list"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"put","output":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"},"title":null,"visualId":"90492b4e-5a70-4529-9089-584b86d9f549"}],"mapping":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"}},"scope":"post_data"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"map","output":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"},"title":null,"visualId":"37300f6a-f556-4a92-8ca7-41effbaa330d"}],"mapping":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Post list loaded successfully"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"data","title":"data","value":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post list query result","visualId":"812a219d-c0e3-403c-8b26-bd934540212e"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/post"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/post"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["body","content"],"scope":"request"},{"__struct__":"ScopeReference","path":["body","tags"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"INSERT INTO `post` (`user_id`, `content`, `tags`) VALUES (?, ?, ?)","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"title":"Add post query","visualId":"b1d34ba9-48aa-4dfc-87c6-35cc299eab1b"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Post has been added"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post insert query result","visualId":"c0b00b3e-eda4-4979-909e-4a9c75dc456f"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/post/:post_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/post/:post_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["path","post_id"],"scope":"request"},{"__struct__":"ScopeReference","path":["path","post_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE FROM `comment` WHERE `post_id` = ? AND `comment_id` IN ( SELECT `post_comments`.`id` FROM ( SELECT `id` FROM `comment` WHERE `post_id` = ? ) post_comments )","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete post comment query","visualId":"cee67197-8d80-4bfe-9171-64b05a861e88"},{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","post_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE FROM `post` WHERE `user_id` = ? AND `id` = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete post query","visualId":"e9a6779b-b20c-4461-9045-067fa5a912e0"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Post has been removed"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post delete query result","visualId":"4db8ec5b-ffa3-4cd5-8fc8-c0a1ba2a584c"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"patch","path":"/post/:post_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"patch","path":"/post/:post_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"variable","description":null,"input":{"value":{"__struct__":"ScopeReference","path":["body"],"scope":"request"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"set","output":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"title":"Set information to be updated","visualId":"85477024-ee67-4eb6-8c62-3f3052d70440"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"object":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"keys","output":{"__struct__":"ScopeReference","path":["update_keys"],"scope":"variables"},"title":"Set column information","visualId":"501c67d1-ae4f-41d3-a74d-a24152b137e1"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"key":"id","object":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"value":{"__struct__":"ScopeReference","path":["path","post_id"],"scope":"request"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"put","output":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"title":"Specify the ID to be updated","visualId":"34315088-6a4d-4e6e-8f00-c6a6082f04a3"},{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"columns":{"__struct__":"ScopeReference","path":["update_keys"],"scope":"variables"},"conditions":["id"],"data":{"__struct__":"ScopeReference","path":["update_data"],"scope":"variables"},"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"return-error":false,"table":"post"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"update","output":{"__struct__":"ScopeReference","path":["update_query_result"],"scope":"variables"},"title":"Update post information query","visualId":"239f1cb3-ff25-4f7b-a1dc-e8ae648f45a8"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["update_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Post information has been successfully updated"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post update query result","visualId":"d3265832-2657-4e62-a168-213a606006c4"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/post/:post_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[],"mapping":{"header":{},"status_code":200}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/post/:post_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","post_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE FROM `like` WHERE `user_id` = ? AND `post_id` = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete post like query","visualId":"07ee4a63-3f67-46bf-9edd-64e8a405f83b"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Like has been removed"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post like delete query result","visualId":"f976372e-9bcc-4d5e-ab64-beec9c2d73d4"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/post/:post_id/like"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","post_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"INSERT INTO `like` (`user_id`, `post_id`) VALUES (?, ?)","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"title":"Add post like query","visualId":"84598acb-9f12-4ee4-a308-82a28d2f56d5"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Like added"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post like insert query result","visualId":"93e245a4-c77b-4a6f-bbbb-49404902637d"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/profile/:user_id"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"string","description":null,"input":{"string":"SELECT \n    id, username, name, email, phone, gender, description, \n    ifnull(posts.count, 0) as post_count, \n    ifnull(followers.count, 0) as follower_count, \n    ifnull(followings.count, 0) as following_count \nFROM `user`\nLEFT OUTER JOIN ( \n\tSELECT COUNT(*) as count, user_id FROM `post` GROUP BY user_id \n) as posts ON posts.user_id = user.id\nLEFT OUTER JOIN ( \n\tSELECT COUNT(*) as count, follow_user_id FROM `follow` GROUP BY follow_user_id \n) as followers ON followers.follow_user_id = user.id\nLEFT OUTER JOIN ( \n\tSELECT COUNT(*) as count, user_id FROM `follow` GROUP BY user_id \n) as followings ON followings.user_id = user.id\nWHERE id =  ${user_id}","variable":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"user_id","title":"user_id","value":{"__struct__":"ScopeReference","path":["path","user_id"],"scope":"request"}}]}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"interpolate","output":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"title":null,"visualId":"cecacb45-36ac-4e9d-94f6-b91c2a089d23"},{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"User info query","visualId":"d41e19cf-0117-40ac-8f84-764fbc857c2f"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["query_result","0"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"User information loaded successfully"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"data","title":"data","value":{"__struct__":"ScopeReference","path":["query_result","0"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user info query result","visualId":"3aa04121-b366-4185-a646-86c4d990eeae"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"delete","path":"/profile/:user_id/follow"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","user_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"DELETE FROM `follow` WHERE `user_id` = ? AND `follow_user_id` = ?","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"title":"Delete user follow query","visualId":"c0fd9bb4-280e-4ee8-95c9-c8278ae5b7c2"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["delete_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Unfollowed"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user follow delete query result","visualId":"912a8dd9-3d1a-4d11-8887-20ddeba7e6a6"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"post","path":"/profile/:user_id/follow"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"},{"__struct__":"ScopeReference","path":["path","user_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"INSERT INTO `follow` (`user_id`, `follow_user_id`) VALUES (?, ?)","return-error":false,"type":"write"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"title":"Add user follow query","visualId":"d324a7ab-855e-40f4-84b1-7b6610aa7e55"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["insert_query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Followed"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user follow insert query result","visualId":"bd90cb94-26ff-4fd9-8bfa-d53fcbe4272d"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/profile/:user_id/followers"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["path","user_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"SELECT `id`, `username`, `name` FROM `user` WHERE `id` IN ( SELECT `user_id` FROM `follow` WHERE `follow_user_id` = ? )","return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"User follower list query","visualId":"084d14d5-7cc9-4df5-9739-aad9e88268c3"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Follower list loaded successfully"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"data","title":"data","value":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user follower list query result","visualId":"87013eec-7582-4fb8-b192-acbbfeedfc58"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/profile/:user_id/following"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[{"__struct__":"ScopeReference","path":["path","user_id"],"scope":"request"}],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":"SELECT `id`, username`, `name` FROM `user` WHERE `id` IN ( SELECT `follow_user_id` FROM `follow` WHERE `user_id` = ? )","return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"User following list query","visualId":"e6a94758-2fa2-41e0-afbc-fdb347f72570"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Following list loaded successfully"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"data","title":"data","value":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the user following list query result","visualId":"9433f517-2076-4a22-87eb-4d986dd10847"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/profile/:user_id/post"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"profile_id":{"__struct__":"ScopeReference","path":["path","user_id"],"scope":"request"},"user_id":{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"profile_list","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"post","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["post"],"scope":"variables"},"title":null,"visualId":"c2cf3fd7-68a8-4e08-b346-b2d997fcdd21"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["post","list"],"scope":"variables"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"iteration","description":null,"input":{"array":{"__struct__":"ScopeReference","path":["post","list"],"scope":"variables"},"foreach":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"post_id":{"__struct__":"ScopeReference","path":["value","id"],"scope":"post_data"},"user_id":{"__struct__":"ScopeReference","path":["authentication","info","id"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"list","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"comment","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["comment"],"scope":"variables"},"title":null,"visualId":"1467170a-e515-42de-8a1f-7b8f81caf3b3"},{"__struct__":"Action","active":true,"category":"object","description":null,"input":{"key":"comments","object":{"__struct__":"ScopeReference","path":["post","list",{"__struct__":"ScopeReference","path":["index"],"scope":"post_data"}],"scope":"variables"},"value":{"__struct__":"ScopeReference","path":["comment","list"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"put","output":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"},"title":null,"visualId":"f01dac66-ac46-46a0-af9e-0d731c497a92"}],"mapping":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"}},"scope":"post_data"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"map","output":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"},"title":null,"visualId":"7126cda7-e29a-4cfc-b9ce-727c02cdd388"}],"mapping":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"success"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"Post list loaded successfully"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"data","title":"data","value":{"__struct__":"ScopeReference","path":["post_list"],"scope":"variables"}}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}}},{"condition":true,"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"result","title":"result","value":"error"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"message","title":"message","value":"An error occurred. Please try again"}]}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":400}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":"Check the post list query result","visualId":"79024cac-4c3c-4f6b-907e-8c3dde13e651"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}},{"event":{"__struct__":"APIOperationReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"operationReference":{"__struct__":"HTTPOperationReference","method":"get","path":"/auth/user"}},"matches":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"variable","description":null,"input":{"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"body","title":"body","value":{"__struct__":"ScopeReference","path":["authentication","info"],"scope":"variables"}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"status_code","title":"status_code","value":200}]}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"set","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":null,"visualId":"eb2a9c0c-5902-4d9e-8903-79e856710057"}],"mapping":{"body":{"__struct__":"ScopeReference","path":["result","body"],"scope":"variables"},"status_code":{"__struct__":"ScopeReference","path":["result","status_code"],"scope":"variables"}}},"in":{}}],"setting":{},"test":{}}],"info":{"description":"Server for SNS-App service","title":"SNS-App Server"},"setting":{"allowCredentials":"*","allowHeaders":"*","allowMethods":"*","allowOrigin":"*","apis":[{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"}],"cors":true,"id":"sns-app-server","port":8080,"securities":[{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["header","authorization"],"scope":"request"},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"authorization":{"__struct__":"ScopeReference","path":["header","authorization"],"scope":"request"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"token_authentication","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_authentication","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["authentication"],"scope":"variables"},"title":null,"visualId":"ec0b88c7-331a-4b89-bc4c-dc97a054a56c"}],"mapping":{"__struct__":"ScopeReference","path":["authentication","token"],"scope":"variables"}}},{"condition":true,"value":null}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["token"],"scope":"variables"},"title":null,"visualId":"c1cbac3f-2d52-4f08-ae0c-40cf37da667d"}],"mapping":{"data":{"__struct__":"ScopeReference","path":["token"],"scope":"variables"}}},"securityReference":{"__struct__":"SecurityReference","apiReference":{"__struct__":"APIReference","id":"sns-app-api","version":"0.0.0"},"name":"bearer"}}],"tls":false}}}}],"Service":[{"id":"comment","version":{"0.0.0":{"info":{"description":"","title":""},"operation":{"list":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"ScopeReference","path":["post_id"],"scope":"input"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"key","title":"key","value":"post_id"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"id","title":"id","value":{"__struct__":"ScopeReference","path":["post_id"],"scope":"input"}}]}},{"condition":{"__struct__":"ScopeReference","path":["comment_id"],"scope":"input"},"value":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"key","title":"key","value":"comment_id"},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"id","title":"id","value":{"__struct__":"ScopeReference","path":["comment_id"],"scope":"input"}}]}}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["search"],"scope":"variables"},"title":null,"visualId":"6abe914f-6563-4c03-8d24-bc197d595b25"},{"__struct__":"Action","active":true,"category":"string","description":null,"input":{"string":"SELECT \n\tcomment.*, user.username, user.name, ifnull(likes.count, 0) as like_count, user_likes.user_id as liked \nFROM `comment` \nLEFT JOIN `user` ON user.id = comment.user_id \nLEFT OUTER JOIN ( \n\tSELECT COUNT(*) as count, comment_id FROM `like` GROUP BY comment_id \n) as likes ON likes.comment_id = comment.id \nLEFT OUTER JOIN ( \n\tSELECT user_id, comment_id FROM `like` WHERE user_id = ${user_id}\n) as user_likes ON user_likes.comment_id = comment.id \nWHERE ${search_key} = ${search_id}\nORDER BY id DESC","variable":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"user_id","title":"user_id","value":{"__struct__":"ScopeReference","path":["user_id"],"scope":"input"}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"search_key","title":"search_key","value":{"__struct__":"ScopeReference","path":["search","key"],"scope":"variables"}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"search_id","title":"search_id","value":{"__struct__":"ScopeReference","path":["search","id"],"scope":"variables"}}]}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"interpolate","output":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"title":null,"visualId":"ebb7ae0d-4dd4-4f54-97a8-9058521e913e"},{"__struct__":"Action","active":true,"category":"database","description":null,"input":{"params":[],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":null,"visualId":"d8811050-2426-400f-a8bb-f94fe94205b6"}],"mapping":{"comment_list":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"list":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"}}},"errorTypes":[],"id":"list","in":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"user_id","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"number"}},"static":false},{"__struct__":"Field","eval":true,"handler":null,"id":"post_id","label":null,"required":false,"schema":{"__struct__":"Schema","type":"json","value":{"type":"number"}},"static":false},{"__struct__":"Field","eval":true,"handler":null,"id":"comment_id","label":null,"required":false,"schema":{"__struct__":"Schema","type":"json","value":{"type":"number"}},"static":false}]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"list","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"array"}},"static":false}]},"test":{}}}}}},{"id":"user_authentication","version":{"0.0.0":{"info":{"description":"","title":"SNS-App Authentication Service"},"operation":{"token_authentication":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"security","description":null,"input":{"authorization":{"__struct__":"ScopeReference","path":["authorization"],"scope":"input"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"authorization-decode","output":{"__struct__":"ScopeReference","path":["authorization_data"],"scope":"variables"},"title":"","visualId":"a8a25c3d-b14c-42a6-8613-16626938117b"},{"__struct__":"Action","active":true,"category":"data/jwt","description":null,"input":{"jwt":{"__struct__":"ScopeReference","path":["authorization_data","token"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"decode","output":{"__struct__":"ScopeReference","path":["decode"],"scope":"variables"},"title":null,"visualId":"c1e2d765-fd22-4fbd-8209-200c28a04b85"},{"__struct__":"Action","active":true,"category":"datetime","description":null,"input":{"time_unit":"second"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"current-unix-time","output":{"__struct__":"ScopeReference","path":["current_time"],"scope":"variables"},"title":null,"visualId":"2149a824-492f-4f9f-819d-bdc3554e598f"},{"__struct__":"Action","active":true,"category":"conditional","description":null,"input":{"conditions":[{"condition":{"__struct__":"Operator","type":"AND","value":[{"__struct__":"ScopeReference","path":["decode","info"],"scope":"variables"},{"__struct__":"Comparison","type":"greater-than","value":[{"__struct__":"ScopeReference","path":["decode","expires"],"scope":"variables"},{"__struct__":"ScopeReference","path":["current_time"],"scope":"variables"}]}]},"value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"service","description":null,"input":{"input":{"info":{"__struct__":"ScopeReference","path":["decode","info"],"scope":"variables"}},"serviceOperationReference":{"__struct__":"ServiceOperationReference","id":"token_create","intentReference":null,"serviceReference":{"__struct__":"ServiceReference","id":"user_authentication","version":"0.0.0"},"title":null}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"operation","output":{"__struct__":"ScopeReference","path":["create_token"],"scope":"variables"},"title":null,"visualId":"72db43bf-4803-45a4-98a6-a87b8caa3cb1"}],"mapping":true}},{"condition":true,"value":false}]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"if","output":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"title":null,"visualId":"fc3bd802-6b3e-4a41-a928-685bf9f45d16"}],"mapping":{"info":{"__struct__":"ScopeReference","path":["decode","info"],"scope":"variables"},"result":{"__struct__":"ScopeReference","path":["result"],"scope":"variables"},"token":{"__struct__":"ScopeReference","path":["create_token","token"],"scope":"variables"}}},"errorTypes":[],"id":"token_authentication","in":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"authorization","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"string"}},"static":false}]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"result","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"boolean"}},"static":false},{"__struct__":"Field","eval":true,"handler":null,"id":"token","label":null,"required":false,"schema":{"__struct__":"Schema","type":"json","value":{"type":"string"}},"static":false},{"__struct__":"Field","eval":true,"handler":null,"id":"info","label":null,"required":false,"schema":{"__struct__":"Schema","type":"json","value":{"type":"object"}},"static":false}]},"test":{}},"token_create":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"data/jwt","description":null,"input":{"data":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"info","title":"info","value":{"__struct__":"ScopeReference","path":["info"],"scope":"input"}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"expires","title":"expires","value":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"datetime","description":null,"input":{"time_unit":"second"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"current-unix-time","output":{"__struct__":"ScopeReference","path":["current_time"],"scope":"variables"},"title":null,"visualId":"9021ce1f-959c-4ab5-8e3e-66a56cdc795e"},{"__struct__":"Action","active":true,"category":"array","description":null,"input":{"array":[{"__struct__":"ScopeReference","path":["current_time"],"scope":"variables"},2592000]},"log":false,"mockingFlag":false,"mockingValue":null,"name":"sum","output":{"__struct__":"ScopeReference","path":["expires"],"scope":"variables"},"title":null,"visualId":"fb0f9556-5343-4d0b-ab15-30a22064edab"}],"mapping":{"__struct__":"ScopeReference","path":["expires"],"scope":"variables"}}}]}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"encode","output":{"__struct__":"ScopeReference","path":["token"],"scope":"variables"},"title":null,"visualId":"b64da848-c2e3-4cb2-b796-aafb272ef6e0"}],"mapping":{"token":{"__struct__":"ScopeReference","path":["token"],"scope":"variables"}}},"errorTypes":[],"id":"token_create","in":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"info","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"object"}},"static":false}]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"token","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"string"}},"static":false}]},"test":{}}}}}},{"id":"post","version":{"0.0.0":{"info":{"description":"","title":""},"operation":{"list":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"string","description":null,"input":{"string":"SELECT \n\tpost.*, user.username, user.name, ifnull(likes.count, 0) as like_count, user_likes.user_id as liked \nFROM `post` \nLEFT JOIN `user` ON user.id = post.user_id \nLEFT OUTER JOIN ( \n\tSELECT COUNT(*) as count, post_id FROM `like` GROUP BY post_id \n) as likes ON likes.post_id = post.id \nLEFT OUTER JOIN ( \n\tSELECT user_id, post_id FROM `like` WHERE user_id = ${user_id}\n) as user_likes ON user_likes.post_id = post.id \nORDER BY id DESC","variable":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"user_id","title":"user_id","value":{"__struct__":"ScopeReference","path":["user_id"],"scope":"input"}}]}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"interpolate","output":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"title":null,"visualId":"81223fc4-5120-4187-a3d7-ece19955dbcd"},{"__struct__":"Action","active":true,"category":"database","description":"","input":{"params":[],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"Post list query","visualId":"420f2b73-d8cc-44a0-8c26-f00c624111a2"}],"mapping":{"list":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"post_list":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"}}},"errorTypes":[],"id":"list","in":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"user_id","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"number"}},"static":false}]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"list","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"array"}},"static":false}]},"test":{"test":{"input":{"user_id":1}}}},"profile_list":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"string","description":null,"input":{"string":"SELECT \n\tpost.*, user.username, user.name, ifnull(likes.count, 0) as like_count, user_likes.user_id as liked \nFROM `post` \nLEFT JOIN `user` ON user.id = post.user_id \nLEFT OUTER JOIN ( \n\tSELECT COUNT(*) as count, post_id FROM `like` GROUP BY post_id \n) as likes ON likes.post_id = post.id \nLEFT OUTER JOIN ( \n\tSELECT user_id, post_id FROM `like` WHERE user_id = ${user_id}\n) as user_likes ON user_likes.post_id = post.id \nWHERE post.user_id = ${profile_id}\nORDER BY id DESC","variable":{"__struct__":"ObjectMapping","values":[{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"user_id","title":"user_id","value":{"__struct__":"ScopeReference","path":["user_id"],"scope":"input"}},{"__struct__":"ObjectMappingKeyValue","default":null,"exclude":false,"key":"profile_id","title":"profile_id","value":{"__struct__":"ScopeReference","path":["profile_id"],"scope":"input"}}]}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"interpolate","output":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"title":null,"visualId":"0054d0ca-69a4-4dc8-9540-94a9e8350bb1"},{"__struct__":"Action","active":true,"category":"database","description":"","input":{"params":[],"processReference":{"__struct__":"ClientReference","id":"sns-app-client"},"processed":true,"query":{"__struct__":"ScopeReference","path":["query"],"scope":"variables"},"return-error":false,"type":"read"},"log":false,"mockingFlag":false,"mockingValue":null,"name":"query","output":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"},"title":"Post list query","visualId":"01394bc1-4d40-4b19-9da4-c06cf61a9f77"}],"mapping":{"list":{"__struct__":"ScopeReference","path":["query_result"],"scope":"variables"}}},"errorTypes":[],"id":"profile_list","in":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"user_id","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"number"}},"static":false},{"__struct__":"Field","eval":true,"handler":null,"id":"profile_id","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":["number","string"]}},"static":false}]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"list","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"array"}},"static":false}]},"test":{}}}}}},{"id":"user_password","version":{"0.0.0":{"info":{"description":"","title":"SNS-App Password Service"},"operation":{"encode":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"security","description":null,"input":{"algorithm":"sha256","data":{"__struct__":"ScopeReference","path":["password"],"scope":"input"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"hash","output":{"__struct__":"ScopeReference","path":["hashed_password"],"scope":"variables"},"title":null,"visualId":"ae6a8718-21f1-435c-9358-5f60e51e92cd"},{"__struct__":"Action","active":true,"category":"data/binary","description":null,"input":{"case":"upper","data":{"__struct__":"ScopeReference","path":["hashed_password"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"16-encode","output":{"__struct__":"ScopeReference","path":["hashed_password"],"scope":"variables"},"title":null,"visualId":"705e7f30-2591-4d73-879d-10988f90d393"}],"mapping":{"hashed_password":{"__struct__":"ScopeReference","path":["hashed_password"],"scope":"variables"}}},"errorTypes":[],"id":"encode","in":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"password","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"string"}},"static":false}]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"hashed_password","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"string"}},"static":false}]},"test":{"test-password-encode":{"input":{"password":"qwer1234"}}}},"generate":{"do":{"__struct__":"Execution","actions":[{"__struct__":"Action","active":true,"category":"uuid","description":null,"input":{"format":"default","info":false},"log":false,"mockingFlag":false,"mockingValue":null,"name":"random","output":{"__struct__":"ScopeReference","path":["random_text"],"scope":"variables"},"title":null,"visualId":"1bac1f6f-0991-4f64-bc1f-f9c409f4c6c1"},{"__struct__":"Action","active":true,"category":"string","description":null,"input":{"pattern":"-","replacement":"","string":{"__struct__":"ScopeReference","path":["random_text"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"replace","output":{"__struct__":"ScopeReference","path":["random_text"],"scope":"variables"},"title":null,"visualId":"0c449527-1c2e-41fc-8895-3429512edcf1"},{"__struct__":"Action","active":true,"category":"string","description":null,"input":{"length":15,"start":0,"string":{"__struct__":"ScopeReference","path":["random_text"],"scope":"variables"}},"log":false,"mockingFlag":false,"mockingValue":null,"name":"slice","output":{"__struct__":"ScopeReference","path":["password"],"scope":"variables"},"title":null,"visualId":"d280eb47-7da4-4c22-8050-98b792216653"}],"mapping":{"password":{"__struct__":"ScopeReference","path":["password"],"scope":"variables"}}},"errorTypes":[],"id":"generate","in":{"__struct__":"Schema","type":"arguments","value":[]},"info":{},"intents":[],"out":{"__struct__":"Schema","type":"arguments","value":[{"__struct__":"Field","eval":true,"handler":null,"id":"password","label":null,"required":true,"schema":{"__struct__":"Schema","type":"json","value":{"type":"string"}},"static":false}]},"test":{"test-password-generate":{"input":{}}}}}}}}]}